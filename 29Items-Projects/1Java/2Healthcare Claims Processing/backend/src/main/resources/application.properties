# Healthcare Claims Processing - Application Configuration

# Application
quarkus.application.name=healthcare-claims-processing
quarkus.application.version=1.0.0

# HTTP Server
quarkus.http.port=8080
quarkus.http.cors=true
quarkus.http.cors.origins=http://localhost:4200,http://localhost:3000

# Database - PostgreSQL with Reactive
quarkus.datasource.db-kind=postgresql
quarkus.datasource.reactive.url=postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:claims}
quarkus.datasource.username=${DB_USERNAME:claims_user}
quarkus.datasource.password=${DB_PASSWORD:claims_password}

# Hibernate Reactive
quarkus.hibernate-orm.database.generation=validate
quarkus.hibernate-orm.log.sql=false
quarkus.hibernate-orm.physical-naming-strategy=org.hibernate.boot.model.naming.CamelCaseToUnderscoresNamingStrategy

# Flyway Migrations
quarkus.flyway.migrate-at-start=true
quarkus.flyway.locations=classpath:db/migration

# Kafka Configuration
kafka.bootstrap.servers=${KAFKA_BOOTSTRAP_SERVERS:localhost:9092}
mp.messaging.outgoing.claim-events-out.connector=smallrye-kafka
mp.messaging.outgoing.claim-events-out.topic=claim-events
mp.messaging.outgoing.claim-events-out.value.serializer=io.quarkus.kafka.client.serialization.ObjectMapperSerializer

mp.messaging.outgoing.fraud-events-out.connector=smallrye-kafka
mp.messaging.outgoing.fraud-events-out.topic=fraud-alerts
mp.messaging.outgoing.fraud-events-out.value.serializer=io.quarkus.kafka.client.serialization.ObjectMapperSerializer

mp.messaging.incoming.claim-events-in.connector=smallrye-kafka
mp.messaging.incoming.claim-events-in.topic=claim-events
mp.messaging.incoming.claim-events-in.group.id=claims-processor
mp.messaging.incoming.claim-events-in.value.deserializer=io.quarkus.kafka.client.serialization.ObjectMapperDeserializer
mp.messaging.incoming.claim-events-in.failure-strategy=dead-letter-queue

mp.messaging.incoming.fraud-alerts-in.connector=smallrye-kafka
mp.messaging.incoming.fraud-alerts-in.topic=fraud-alerts
mp.messaging.incoming.fraud-alerts-in.group.id=fraud-handler
mp.messaging.incoming.fraud-alerts-in.value.deserializer=io.quarkus.kafka.client.serialization.ObjectMapperDeserializer

# Elasticsearch
quarkus.elasticsearch.hosts=${ES_HOSTS:http://localhost:9200}

# Redis Cache
quarkus.redis.hosts=${REDIS_HOST:redis://localhost:6379}
quarkus.cache.caffeine."providers".expire-after-write=1H
quarkus.cache.caffeine."providers".maximum-size=1000

# Security - OIDC
quarkus.oidc.auth-server-url=${OIDC_AUTH_URL:https://login.microsoftonline.com/${AZURE_TENANT_ID}/v2.0}
quarkus.oidc.client-id=${AZURE_CLIENT_ID:}
quarkus.oidc.credentials.secret=${AZURE_CLIENT_SECRET:}
quarkus.oidc.application-type=service
quarkus.oidc.token.issuer=${OIDC_ISSUER:}

# Security - JWT
mp.jwt.verify.publickey.location=${JWT_PUBLIC_KEY_LOCATION:}
mp.jwt.verify.issuer=${JWT_ISSUER:}

# Fraud Detection API
fraud.api.url=${FRAUD_API_URL:http://localhost:8090}
fraud.api.key=${FRAUD_API_KEY:}
fraud.api.timeout=5000

# GraphQL
quarkus.smallrye-graphql.ui.enable=true
quarkus.smallrye-graphql.ui.always-include=true

# OpenAPI
quarkus.smallrye-openapi.info-title=Healthcare Claims Processing API
quarkus.smallrye-openapi.info-version=1.0.0
quarkus.smallrye-openapi.info-description=API for processing healthcare insurance claims
quarkus.swagger-ui.always-include=true

# Health Checks
quarkus.smallrye-health.ui.enable=true

# Metrics
quarkus.micrometer.export.prometheus.enabled=true
quarkus.micrometer.binder.http-server.enabled=true
quarkus.micrometer.binder.kafka.enabled=true

# OpenTelemetry
quarkus.otel.enabled=true
quarkus.otel.exporter.otlp.endpoint=${OTEL_EXPORTER_OTLP_ENDPOINT:http://localhost:4317}
quarkus.otel.service.name=${OTEL_SERVICE_NAME:claims-service}

# Logging
quarkus.log.level=INFO
quarkus.log.category."com.healthcare".level=DEBUG
quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n
quarkus.log.console.json=false

# Azure Functions (for serverless deployment)
quarkus.azure-functions.app-name=${AZURE_FUNCTION_APP_NAME:claims-processing}
quarkus.azure-functions.app-service-plan-name=${AZURE_APP_SERVICE_PLAN:claims-plan}
quarkus.azure-functions.region=${AZURE_REGION:eastus}
quarkus.azure-functions.resource-group=${AZURE_RESOURCE_GROUP:claims-rg}

# Seed Data - Disable by default (enable in dev profile)
claims.seed-data.enabled=${CLAIMS_SEED_DATA_ENABLED:false}
